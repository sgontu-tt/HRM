<%title "Employee Birthdays"%>

<script>
    $(document).ready(function() {
        $('#calendar').fullCalendar({
        	header: {
        	left: 'prev,next today',
        	center: 'title'
      		},
            selectable: true,
      		selectHelper: true,
      		editable: true,
      		eventLimit: true,
      		eventColor: '#FFF',
      		events: '/events.json',
      		select: function(start, end) {
	        $.getScript('/events/new', function() {
	          $('#event_date_range').val(moment(start).format("MM/DD/YYYY HH:mm") + ' - ' + moment(end).format("MM/DD/YYYY HH:mm"))
	          date_range_picker();
	          $('.start_hidden').val(moment(start).format('YYYY-MM-DD HH:mm'));
	          $('.end_hidden').val(moment(end).format('YYYY-MM-DD HH:mm'));
	        });

	        //calendar.fullCalendar('unselect');
	      },

	      eventDrop: function(event, delta, revertFunc) {
	        event_data = { 
	          event: {
	            id: event.id,
	            start: event.start.format(),
	            end: event.end.format()
	          }
	        };
	        $.ajax({
	            url: event.update_url,
	            data: event_data,
	            type: 'PATCH'
	        });
	      },
      
	      eventClick: function(event, jsEvent, view) {
	      	//alert("djdfjadj");
	      	//$('#calendarModal').modal();
	        $.getScript(event.edit_url, function() {	          
	          $('.start_hidden').val(moment(event.start).format('YYYY-MM-DD HH:mm'));
	          $('.end_hidden').val(moment(event.end).format('YYYY-MM-DD HH:mm'));
	        });

	      }
            
            //editable: true,
            //eventLimit: true, // allow "more" link when too many events
        });
    });

    $('.date-range-picker').each(function(){
    $(this).daterangepicker({
        timePicker: true,
        timePickerIncrement: 30,
        alwaysShowCalendars: true
    }, function(start, end, label) {
      $('.start_hidden').val(start.format('YYYY-MM-DD HH:mm'));
      $('.end_hidden').val(end.format('YYYY-MM-DD HH:mm'));
    });
    });
</script>

<div id='calendar'></div>

<div id='remote_container'></div>



